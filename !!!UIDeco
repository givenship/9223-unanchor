-- Euva Decorations Module (Compressed)
-- Table-driven decorative elements

local Decorations = {}
Decorations.Theme = nil
Decorations.ui = nil -- Set by Main (from Components)
Decorations.Elements = {}
Decorations.FadeElements = {}

-- Decoration definitions (table-driven)
local DecoConfigs = {
    -- Content area decorations
    Content = {
        {name = "TreeL", asset = "TreeL", size = {150,150}, pos = {0,-10,1,-120}, trans = 0.4, zindex = 60},
        {name = "TreeR", asset = "TreeR", size = {100,100}, pos = {1,-110,0,40}, trans = 0.4, rot = 180, zindex = 60},
    },
    -- MainFrame decorations
    Main = {
        {name = "LArrow", asset = "LArrow", size = {30,30}, pos = {0,10,0,5}, trans = 0.4, zindex = 60},
        {name = "RightSmallArrow", asset = "RightSmallArrow", size = {18,18}, pos = {0,44,0,11}, trans = 0.4, zindex = 60},
        {name = "RArrow", asset = "RArrow", size = {30,30}, pos = {1,-40,1,-40}, trans = 0.4, zindex = 60},
    },
    -- Center decorations (fading with slider)
    Center = {
        {name = "Eye", asset = "Eye", size = {52,52}, anchor = {0.5,0.5}, pos = {0.5,0,0.5,-4}, fade = true, zindex = 55},
        {name = "LeftWing", asset = "Wing", size = {44,44}, anchor = {0.5,0.5}, pos = {0.5,-64,0.5,8}, fade = true, zindex = 55},
        {name = "RightWing", asset = "Wing", size = {44,44}, anchor = {0.5,0.5}, pos = {0.5,64,0.5,8}, rot = 180, fade = true, zindex = 55},
    },
}

function Decorations.Create(mainFrame, contentArea)
    local ASSETS = Decorations.Theme.Assets
    local ui = Decorations.ui
    local decoTrans = Decorations.Theme.Config.DefaultDecoTransparency
    
    local function createDeco(config, parent)
        local img = ui("ImageLabel", {
            Size = UDim2.fromOffset(config.size[1], config.size[2]),
            Position = UDim2.new(config.pos[1], config.pos[2], config.pos[3], config.pos[4]),
            AnchorPoint = config.anchor and Vector2.new(config.anchor[1], config.anchor[2]) or Vector2.new(0, 0),
            BackgroundTransparency = 1,
            Image = ASSETS[config.asset],
            ImageTransparency = config.fade and decoTrans or (config.trans or 0),
            Rotation = config.rot or 0,
            ZIndex = config.zindex or 60,
            Parent = parent,
        })
        
        Decorations.Elements[config.name] = img
        if config.fade then
            table.insert(Decorations.FadeElements, img)
        end
        return img
    end
    
    -- Create content decorations
    for _, cfg in ipairs(DecoConfigs.Content) do
        createDeco(cfg, contentArea)
    end
    
    -- Create main frame decorations
    for _, cfg in ipairs(DecoConfigs.Main) do
        createDeco(cfg, mainFrame)
    end
    
    -- Create center decorations
    for _, cfg in ipairs(DecoConfigs.Center) do
        createDeco(cfg, mainFrame)
    end
end

function Decorations.SetTransparency(value)
    local trans = math.clamp(value, 0, 1)
    for _, img in ipairs(Decorations.FadeElements) do
        if img and img.Parent then
            img.ImageTransparency = trans
        end
    end
end

function Decorations.SetVisible(visible)
    for _, img in pairs(Decorations.Elements) do
        if img and img.Parent then
            img.Visible = visible
        end
    end
end

function Decorations.SetCenterVisible(visible)
    for _, name in ipairs({"Eye", "LeftWing", "RightWing"}) do
        local img = Decorations.Elements[name]
        if img then img.Visible = visible end
    end
end

return Decorations
