-- Euva Main GUI
-- Complete fresh start with unified design
-- Color: #F8E8ED with gradient from bottom-left to top-right

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

-- Create main ScreenGui
local mainGui = Instance.new("ScreenGui")
mainGui.Name = "EuvaMainGUI"
mainGui.ResetOnSpawn = false
mainGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
mainGui.Parent = CoreGui

-- Main container frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 800, 0, 500)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(248, 232, 237) -- #F8E8ED
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = mainGui

-- Add UICorner for rounded corners
local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Gradient overlay (bottom-left to top-right)
local gradient = Instance.new("Frame")
gradient.Name = "Gradient"
gradient.Size = UDim2.new(1, 0, 1, 0)
gradient.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
gradient.BackgroundTransparency = 0.85
gradient.BorderSizePixel = 0
gradient.ZIndex = 1
gradient.Parent = mainFrame

local gradientUI = Instance.new("UIGradient")
gradientUI.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(248, 232, 237)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 245, 248))
}
gradientUI.Rotation = 45 -- Bottom-left to top-right
gradientUI.Parent = gradient

-- Sidebar (left side navigation)
local sidebar = Instance.new("Frame")
sidebar.Name = "Sidebar"
sidebar.Size = UDim2.new(0, 180, 1, 0)
sidebar.Position = UDim2.new(0, 0, 0, 0)
sidebar.BackgroundTransparency = 1
sidebar.BorderSizePixel = 0
sidebar.ZIndex = 2
sidebar.Parent = mainFrame

-- Sidebar title
local sidebarTitle = Instance.new("TextLabel")
sidebarTitle.Name = "Title"
sidebarTitle.Size = UDim2.new(1, -30, 0, 50)
sidebarTitle.Position = UDim2.new(0, 15, 0, 20)
sidebarTitle.BackgroundTransparency = 1
sidebarTitle.Text = "EUVA"
sidebarTitle.Font = Enum.Font.GothamBold -- Will use Inter-like substitute
sidebarTitle.TextSize = 24
sidebarTitle.TextColor3 = Color3.fromRGB(60, 50, 55)
sidebarTitle.TextXAlignment = Enum.TextXAlignment.Left
sidebarTitle.ZIndex = 3
sidebarTitle.Parent = sidebar

-- Tab container
local tabContainer = Instance.new("Frame")
tabContainer.Name = "TabContainer"
tabContainer.Size = UDim2.new(1, -20, 1, -90)
tabContainer.Position = UDim2.new(0, 10, 0, 80)
tabContainer.BackgroundTransparency = 1
tabContainer.BorderSizePixel = 0
tabContainer.ZIndex = 3
tabContainer.Parent = sidebar

local tabLayout = Instance.new("UIListLayout")
tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
tabLayout.Padding = UDim.new(0, 8)
tabLayout.Parent = tabContainer

-- Content area (right side)
local contentArea = Instance.new("Frame")
contentArea.Name = "ContentArea"
contentArea.Size = UDim2.new(1, -200, 1, -40)
contentArea.Position = UDim2.new(0, 190, 0, 20)
contentArea.BackgroundTransparency = 1
contentArea.BorderSizePixel = 0
contentArea.ZIndex = 2
contentArea.Parent = mainFrame

-- Content title
local contentTitle = Instance.new("TextLabel")
contentTitle.Name = "ContentTitle"
contentTitle.Size = UDim2.new(1, 0, 0, 40)
contentTitle.Position = UDim2.new(0, 0, 0, 0)
contentTitle.BackgroundTransparency = 1
contentTitle.Text = "Welcome"
contentTitle.Font = Enum.Font.GothamBold
contentTitle.TextSize = 28
contentTitle.TextColor3 = Color3.fromRGB(60, 50, 55)
contentTitle.TextXAlignment = Enum.TextXAlignment.Left
contentTitle.ZIndex = 3
contentTitle.Parent = contentArea

-- Content container (scrollable)
local contentScroll = Instance.new("ScrollingFrame")
contentScroll.Name = "ContentScroll"
contentScroll.Size = UDim2.new(1, 0, 1, -60)
contentScroll.Position = UDim2.new(0, 0, 0, 50)
contentScroll.BackgroundTransparency = 1
contentScroll.BorderSizePixel = 0
contentScroll.ScrollBarThickness = 4
contentScroll.ScrollBarImageColor3 = Color3.fromRGB(200, 180, 190)
contentScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
contentScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
contentScroll.ZIndex = 3
contentScroll.Parent = contentArea

local contentLayout = Instance.new("UIListLayout")
contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
contentLayout.Padding = UDim.new(0, 15)
contentLayout.Parent = contentScroll

-- Close button (top right)
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -50, 0, 10)
closeButton.BackgroundColor3 = Color3.fromRGB(240, 220, 230)
closeButton.BorderSizePixel = 0
closeButton.Text = "×"
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 24
closeButton.TextColor3 = Color3.fromRGB(60, 50, 55)
closeButton.ZIndex = 5
closeButton.Parent = mainFrame

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 8)
closeCorner.Parent = closeButton

closeButton.MouseButton1Click:Connect(function()
    mainGui:Destroy()
end)

-- Minimize button
local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 40, 0, 40)
minimizeButton.Position = UDim2.new(1, -100, 0, 10)
minimizeButton.BackgroundColor3 = Color3.fromRGB(240, 220, 230)
minimizeButton.BorderSizePixel = 0
minimizeButton.Text = "−"
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.TextSize = 24
minimizeButton.TextColor3 = Color3.fromRGB(60, 50, 55)
minimizeButton.ZIndex = 5
minimizeButton.Parent = mainFrame

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 8)
minimizeCorner.Parent = minimizeButton

local isMinimized = false
minimizeButton.MouseButton1Click:Connect(function()
    local TweenService = game:GetService("TweenService")
    isMinimized = not isMinimized
    
    if isMinimized then
        TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
            Size = UDim2.new(0, 200, 0, 60)
        }):Play()
        minimizeButton.Text = "+"
    else
        TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
            Size = UDim2.new(0, 800, 0, 500)
        }):Play()
        minimizeButton.Text = "−"
    end
end)

-- Draggable functionality
local dragging = false
local dragStart = nil
local startPos = nil

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

mainFrame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- Tab creation function
local currentTab = nil
local function createTab(tabName, tabContent)
    -- Tab button
    local tabButton = Instance.new("TextButton")
    tabButton.Name = tabName .. "Tab"
    tabButton.Size = UDim2.new(1, 0, 0, 36)
    tabButton.BackgroundColor3 = Color3.fromRGB(240, 220, 230)
    tabButton.BackgroundTransparency = 1
    tabButton.BorderSizePixel = 0
    tabButton.Text = tabName
    tabButton.Font = Enum.Font.Gotham
    tabButton.TextSize = 14
    tabButton.TextColor3 = Color3.fromRGB(100, 90, 95)
    tabButton.TextXAlignment = Enum.TextXAlignment.Left
    tabButton.ZIndex = 4
    tabButton.Parent = tabContainer
    
    local tabPadding = Instance.new("UIPadding")
    tabPadding.PaddingLeft = UDim.new(0, 15)
    tabPadding.Parent = tabButton
    
    -- Tab content frame
    local tabFrame = Instance.new("Frame")
    tabFrame.Name = tabName .. "Content"
    tabFrame.Size = UDim2.new(1, 0, 1, 0)
    tabFrame.BackgroundTransparency = 1
    tabFrame.BorderSizePixel = 0
    tabFrame.Visible = false
    tabFrame.ZIndex = 3
    tabFrame.Parent = contentScroll
    
    local tabFrameLayout = Instance.new("UIListLayout")
    tabFrameLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabFrameLayout.Padding = UDim.new(0, 12)
    tabFrameLayout.Parent = tabFrame
    
    -- Tab button click
    tabButton.MouseButton1Click:Connect(function()
        -- Hide all tabs
        for _, child in pairs(contentScroll:GetChildren()) do
            if child:IsA("Frame") then
                child.Visible = false
            end
        end
        
        -- Reset all tab buttons
        for _, btn in pairs(tabContainer:GetChildren()) do
            if btn:IsA("TextButton") then
                btn.BackgroundTransparency = 1
                btn.TextColor3 = Color3.fromRGB(100, 90, 95)
            end
        end
        
        -- Show this tab
        tabFrame.Visible = true
        tabButton.BackgroundTransparency = 0
        tabButton.TextColor3 = Color3.fromRGB(60, 50, 55)
        contentTitle.Text = tabName
        currentTab = tabFrame
    end)
    
    -- Auto-select first tab
    if not currentTab then
        tabButton.MouseButton1Click()
    end
    
    return tabFrame
end

-- Button creation function
local function createButton(parent, buttonText, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 140, 0, 36)
    button.BackgroundColor3 = Color3.fromRGB(240, 220, 230)
    button.BorderSizePixel = 0
    button.Text = buttonText
    button.Font = Enum.Font.Gotham
    button.TextSize = 13
    button.TextColor3 = Color3.fromRGB(60, 50, 55)
    button.ZIndex = 4
    button.Parent = parent
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    button.MouseButton1Click:Connect(callback)
    
    -- Hover effect
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(235, 210, 220)
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(240, 220, 230)
    end)
    
    return button
end

-- Label creation function
local function createLabel(parent, labelText)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 20)
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.Font = Enum.Font.Gotham
    label.TextSize = 13
    label.TextColor3 = Color3.fromRGB(80, 70, 75)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.ZIndex = 4
    label.Parent = parent
    
    return label
end

-- Section creation function
local function createSection(parent, sectionTitle)
    local section = Instance.new("Frame")
    section.Size = UDim2.new(1, 0, 0, 0)
    section.AutomaticSize = Enum.AutomaticSize.Y
    section.BackgroundTransparency = 1
    section.BorderSizePixel = 0
    section.ZIndex = 4
    section.Parent = parent
    
    local sectionLayout = Instance.new("UIListLayout")
    sectionLayout.SortOrder = Enum.SortOrder.LayoutOrder
    sectionLayout.Padding = UDim.new(0, 8)
    sectionLayout.Parent = section
    
    if sectionTitle then
        local title = Instance.new("TextLabel")
        title.Size = UDim2.new(1, 0, 0, 24)
        title.BackgroundTransparency = 1
        title.Text = sectionTitle
        title.Font = Enum.Font.GothamBold
        title.TextSize = 15
        title.TextColor3 = Color3.fromRGB(60, 50, 55)
        title.TextXAlignment = Enum.TextXAlignment.Left
        title.ZIndex = 4
        title.Parent = section
    end
    
    return section
end

-- Create tabs
local homeTab = createTab("Home", {})
local visualTab = createTab("Visual", {})
local combatTab = createTab("Combat", {})
local playerTab = createTab("Player", {})
local miscTab = createTab("Misc", {})
local settingsTab = createTab("Settings", {})

-- Populate Home tab
local homeSection = createSection(homeTab, "Welcome to Euva")
createLabel(homeSection, "Main system loaded successfully")
createButton(homeSection, "Test Button", function()
    print("Button clicked!")
end)

print("✅ Euva Main GUI loaded")
